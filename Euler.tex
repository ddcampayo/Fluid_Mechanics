\section{Material derivative}

When expressing our equations, it is important to distiguish between
a partial time variation and the total one. This is mathematically
encapsulated in the expression for the total variation of a function
of three Cartesian coordinates plus time:
\[
\frac{d A(x,y,z,t) }{dt} =
\frac{\partial A }{\partial t} +
\frac{\partial A }{\partial x} \frac{dx }{dt} +
\frac{\partial A }{\partial y} \frac{dy }{dt} +
\frac{\partial A }{\partial z} \frac{dz }{dt} .
\]

The Cartesian components are not to be considered as independent of
the time. Rather, their time derivatives are precisely the components
of the velocity field:
\[
\frac{d A(x,y,z,t) }{dt} =
\frac{\partial A }{\partial t} +
\frac{\partial A }{\partial x} u_x +
\frac{\partial A }{\partial y} u_y +
\frac{\partial A }{\partial z} u_z .
\]

A way to write this expression more concisely is
\[
\frac{d A }{dt} =
\frac{\partial A }{\partial t} +
\bfu \cdot \nabla A ,
\]
where the operator $\bfu \cdot \nabla$ is
\[
\bfu \cdot \nabla  =
\sum_i u_i \frac{\partial  }{\partial x_i} ,
\]
which indeed looks like a scalar product of vector $\bfu$ and the
vector operator $\nabla$.

This total time derivative received very many names. Among the most
popular we find ``material'', ``Eulerian'', ``convective'',
``advective'' \index{material derivative} \ldots

In any case, the consequence is that convection by the velocity field
adds a new term. This has an important consequence for the change
of the velocity field itself, which turns out to be non-linear. Indeed,
for component $i$,
\[
\frac{d u_i }{dt} =
\frac{\partial v_i }{\partial t} +
\bfu \cdot \nabla u_i .
\]
The second, non-linear term is called the convective
acceleration\index{convective acceleration}. When expressing this
equality in vector form, it is important not to make the eror of
writing
\[
\frac{d \bfu  }{dt} =
\frac{\partial \bfu }{\partial t} +
\bfu  ( \nabla \cdot \bfu ) \qquad \text{(wrong!)} ,
\]
which would imply that incompressible fluids have no such extra
acceleration. The correct expression is
\[
\frac{d \bfu  }{dt} =
\frac{\partial \bfu }{\partial t} +
(\bfu \cdot  \nabla ) \bfu  \qquad \text{(right)} .
\]

Another concise, but more obscure, way of writing it is
\[
\frac{d \bfu  }{dt} =
\frac{\partial \bfu }{\partial t} +
\bfu \cdot  ( \nabla  \bfu ) ,
\]
where now $\nabla  \bfu$ is to be interpreted as a tensor, with
components
\begin{equation}
  \label{eq:nabla_u_def}
  (\nabla  \bfu)_{ij} = \frac{\partial u_j}{\partial x_i} ,
\end{equation}
i.e. a direct product of the vector operator $\nabla$ and vector
$\bfu$ (also known as the gradient of vector $bfu$.) The operation
$\bfu \cdot ( \nabla \bfu )$ is then similar to a left multiplication
of a matrix by a row vector, resulting in a column vector. This sort
of tensors will be again considered in Section \ref{sec:particles}.
Given these two possible interpretations, the acceleration is often
written without any parentheses:
\[
\frac{d \bfu  }{dt} =
\frac{\partial \bfu }{\partial t} +
\bfu \cdot  \nabla  \bfu .
\]


Yet another expression involves the direct product of the velocity
vector with itself:
\[
( \bfu \otimes \bfu )_{ij} := u_i u_j ,
\]
which lets us write
\begin{equation}
  \label{eq:Euler_uu}
    \frac{d \bfu  }{dt} =
    \frac{\partial \bfu }{\partial t} +
    \nabla \cdot ( \bfu \otimes \bfu ),  
\end{equation}
as may be easily checked. This last expression is useful to write down
so-called ``conservation form'' of the equations, in which one desires
an overall $\nabla$ operator acting on several expressions.


\subsection{Continuity, revisited}
\label{sec:continuity2}

The continuity equation, Eq. \ref{eq:continuity} may be written as
\[
\frac{\partial \rho }{\partial t} +
\rho \nabla \cdot \bfu +
(\bfu \cdot \nabla) \rho = 0 ,
\]
or
\[
\frac{d \rho }{d t} = 
 - \rho \nabla  \cdot \bfu .
\]
This later expression is called the ``convergence equation'' by Joe
Monaghan: if $\nabla \cdot \bfu $ is the divergence, $ - \nabla \cdot
\bfu $ could be called the convergence.

We now see that incompressibility, defined as $\nabla \cdot \bfu = 0
$, implies $d(\rho)/(dt) = 0$. This means that density is ``carried
with the flow'', as explained in next session.

\subsection{Physical meaning of the material derivative}

If we measure the value of a given field at a fixed point in space,
its plot as a function of time has a first derivative which, by definition,
is the partial time derivative.


\section{Pressure forces}


\section{The momentum equation}

\begin{equation}
  \label{eq:Euler_momentum}
  \rho \frac{d\bfu }{dt} = - \nabla p + \rho \bfg .
\end{equation}
In Cartesian components:
\begin{equation}
  \label{eq:Euler_momentum_C}
  \rho \frac{d u_i }{dt} =
  - \frac{\partial p} {\partial x_i} 
  + \rho g_i .
\end{equation}

\subsection{Conservation form}

It is well known that Newton's second law applied to mass times
acceleration, or equivalently, to the variation of linear momentum
(since the mass of a particle does not change). The reader may be
therefore worried about this law being the right one.  In fact, a
direct application of the ideas in Section \ref{sec:continuity} would
lead to this sort of equation for the change in the $i$-th component
of the angular momentum:
\[
\frac{\partial (\rho u_i) } {\partial t} =
- \nabla \cdot  ( \rho u_i \bfu )
- \frac{\partial p} {\partial x_i} 
  + \rho g_i .
\]
In it, the change of linear momentum per volume is changed due to
volumetric forces, and also due to convection of momentum. This can
also be written in vector form:
\[
\frac{\partial  (\rho \bfu ) }{\partial t} +
\nabla \cdot ( \rho \bfu \otimes \bfu ) =
  - \nabla p 
  + \rho \bfg ,
\]
which strongly resembles the expression of \ref{eq:Euler_uu}. The
difference is that now the density $\rho$ is inside the time and
space derivatives.

The happy answer is that both are equivalent, thanks to this handy
identity, which applies to any field:
\[
\frac{\partial ( \rho  A ) }{\partial t} +
\nabla  \cdot ( \rho \bfu A) =
%
A
\underbrace{
\left(
\frac{\partial \rho }{\partial t} +
\nabla  \cdot ( \rho \bfu ) 
\right)}_{=0}  +
\rho 
\underbrace{
\left(
\frac{\partial A }{\partial t} +
\bfu \cdot \nabla  A
\right) }_{=dA/dt}  ,
\]
or
\begin{equation}
  \label{eq:conserv_to_total}
  \frac{\partial ( \rho  A ) }{\partial t} +
  \nabla  \cdot ( \rho \bfu A) =
  \rho \frac{d  A }{d t} .
\end{equation}
This identity permits the conversion from the ``conservation''
expression of any quantity $\rho A$ as a ``convective form'', $\rho
dA/dt$. It is interesting that if $A$ is a constant, continity is
recovered.

Since this identity applies to each of the Cartesian components of the
velocity, then it applies to the velocity itself.

We may therefore write Euler's equation in conservation form:
\[
\frac{\partial  (\rho \bfu ) }{\partial t} +
 \nabla \cdot ( \rho \bfu \otimes \bfu ) =
 - \nabla p 
 + \rho \bfg .
\]


\section{Bernouilli's principle}

\input{Bernoulli}


\section{Dimensionless variables}
\label{sec:Euler_adim}

A procedure to gain insight into a physical problem is to try to cast
the different magnitudes into dimensionless (or, ``reduced'')
ones. For example, if there is a relevant length scale $L$, all
lengths may be rescaled according to it:
\[
x^*=\frac{x}{L} \quad
y^*=\frac{y}{L} \quad
z^*=\frac{z}{L} ,
\]
where an asterisk marks a dimensionless magnitude. We can also write
it in vector notation: $\bfr^* = \bfr / L$.

As an example, in some problems this is the only relevant scale, and
the movement is driven by gravity, whose accelaration is $g$. In such
cases, the time scale will be given by the only combination of $L$ and
$g$:
\[
t_0 \sim \sqrt{\frac{ L }{ g }} .
\]
This is actually the correct result for the period of a simple
pendulum, but for a numerical factor of $2\pi$ with no dimensions:
$T=2\pi t_0$. No equations have been solved (or even written down) in
order to arrive to this result. Notice also that for larger
displacements of the pendulum, the amplitude of the motion is another
length, which complicates the analysis.

In many fluid problems there is a well-defined velocity $u_0$ that
sets the velocity values (e.g. the upstream velocity in flows around
objects). If this is the case,
\[
\bfu^* = \frac{\bfu}{u_0} \qquad
t^*=\frac{t}{L/u_0} ,
\]
so the velocity and length set the time scale. If we apply this to
our Euler equation,
\[
\rho \frac{d\bfu }{dt} =
- \nabla p 
+ \rho \bfg  \qquad
\rho \frac{u_0}{L/u_0} \frac{d\bfu^* }{dt^* } =
- \nabla p 
+ \rho \bfg .
\]

Notice that the $\nabla$ operator can also be cast into dimensionless
form. For example, its $x$ component is
\[
\nabla_x = \frac{\partial}{\partial x} = \frac{\partial}{\partial (x^* L) } =
\frac{ 1 }{ L } \frac{\partial}{\partial x^* },
\]
so we may define
\[
\nabla^* = \frac{ 1 }{ L } \nabla.
\]

The Euler equation then reads,
\[
\rho \frac{u_0}{L/u_0} \frac{d\bfu^* }{dt^* } =
- \frac{ 1 }{ L } \nabla^* p 
+ \rho \bfg .
\]

Usually, a reference value $\rho_0$ for the density is often known, so
that $\rho^* = \rho / \rho_0$, and
\[
\rho_0 \rho^* \frac{u_0}{L/u_0} \frac{d\bfu^* }{dt^* } =
- \frac{ 1 }{ L } \nabla^* p 
+ \rho \bfg .
\]


Now, multiplying throughout by $L/(\rho_0 u_0^2)$, and supposing for simplicity
that the density is constant,
\begin{equation}
  \label{eq:Euler_just_before_adim}
\rho^*
\frac{d\bfu^* }{dt^* } =
-  \nabla^* \frac{ p }{ \rho_0 u_0^2 } 
+  \frac{ L }{ u_0^2 } \bfg \qquad \to \qquad
\rho^* \frac{d\bfu^* }{dt^* } =
-  \nabla^* p^*
+  \rho^* \bfg^* 
\end{equation}
We have therefore found that the dimensionless pressure and gravity
acceleration are given by
\[
p^*= \frac{ p }{ \rho_0 u_0^2 } \qquad
\bfg^* = \frac{ L }{ u_0^2 } \bfg .
\]

The reduced pressure was to be expected, given the Bernoulli
expressions involving $\rho u^2$. The reduced gravity is directly
related to Froude's number, which is historically defined as
\[
\mathrm{Fr}=\frac{ \sqrt{gL}}{u_0}.
\]
Therefore, $ \bfg^* = \mathrm{Fr}^2 (\bfg/g) $, where vector $(\bfg/g)
$ is the unit vector pointing in whichever direction the gravity
points to in our problem (usually, $-y$ or $-z$.)


It is easy to check that the continuity equation can likewise be
cast into reduced form:
\[
\frac{d\rho^* }{dt^* }+
 ( \nabla^* \bfu^*) = 0 .
\]
